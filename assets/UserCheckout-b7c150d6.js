import{_ as h,m as u,a as _,l as p,c as l,b as t,F as g,s as m,u as e,j as f,h as y,o as n}from"./index-511ca679.js";import{s as b}from"./swalStore-fe672b7f.js";const{VITE_API:i,VITE_PATH:c}={VITE_API:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"weekhomeworks",BASE_URL:"/Vue-Homework-Vite",MODE:"production",DEV:!1,PROD:!0,SSR:!1},k={data(){return{id:"",order:{user:{}}}},methods:{getOrder(){this.loadings.pageLoading=!0,this.$http.get(`${i}/api/${c}/order/${this.id}`).then(r=>{this.order=r.data.order,this.loadings.pageLoading=!1}).catch(r=>{this.loadings.pageLoading=!1,this.triggerToast("error",r.response.data.message)})},payOrder(){this.loadings.pageLoading=!0,this.$http.post(`${i}/api/${c}/pay/${this.id}`).then(()=>{this.loadings.pageLoading=!1,this.getOrder()}).catch(r=>{this.loadings.pageLoading=!1,this.triggerToast("error",r.response.data.message)})},...u(b,["triggerToast"])},computed:{..._(p,["loadings"])},created(){this.id=this.$route.params.orderId,this.getOrder()}},x={class:"my-5 row justify-content-center"},E={class:"table align-middle"},T=t("thead",null,[t("th",null,"品名"),t("th",null,"數量"),t("th",null,"單價")],-1),V={class:"text-end"},L=t("td",{colspan:"2",class:"text-end"},"總計",-1),O={class:"text-end"},S={class:"table"},w=t("th",{width:"100"},"Email",-1),I=t("th",null,"姓名",-1),A=t("th",null,"收件人電話",-1),v=t("th",null,"收件人地址",-1),P=t("th",null,"付款狀態",-1),B={key:0},D={key:1,class:"text-success"},H={key:0,class:"text-end"},R=t("button",{class:"btn btn-danger"},"確認付款去",-1),$=[R];function j(r,d,C,F,s,a){return n(),l("div",x,[t("form",{class:"col-md-6",onSubmit:d[0]||(d[0]=y((...o)=>a.payOrder&&a.payOrder(...o),["prevent"]))},[t("table",E,[T,t("tbody",null,[(n(!0),l(g,null,m(s.order.products,o=>(n(),l("tr",{key:o.id},[t("td",null,e(o.product.title),1),t("td",null,e(o.qty)+"/"+e(o.product.unit),1),t("td",V,e(o.final_total),1)]))),128))]),t("tfoot",null,[t("tr",null,[L,t("td",O,e(s.order.total),1)])])]),t("table",S,[t("tbody",null,[t("tr",null,[w,t("td",null,e(s.order.user.email),1)]),t("tr",null,[I,t("td",null,e(s.order.user.name),1)]),t("tr",null,[A,t("td",null,e(s.order.user.tel),1)]),t("tr",null,[v,t("td",null,e(s.order.user.address),1)]),t("tr",null,[P,t("td",null,[s.order.is_paid?(n(),l("span",D,"付款完成")):(n(),l("span",B,"尚未付款"))])])])]),s.order.is_paid===!1?(n(),l("div",H,$)):f("",!0)],32)])}const U=h(k,[["render",j]]);export{U as default};
