import{_ as h,m as g,a as f,l as w,c as V,b as s,d as o,w as b,r as n,o as v,n as p}from"./index-7e3417dd.js";import{s as k}from"./swalStore-856bed93.js";const{VITE_API:E}={VITE_API:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"weekhomeworks",BASE_URL:"/Vue-Homework-Vite",MODE:"production",DEV:!1,PROD:!0,SSR:!1},x={data(){return{user:{}}},methods:{login(){const r=`${E}/admin/signin`;this.loadings.pageLoading=!0,this.$http.post(r,this.user).then(e=>{const{token:l,expired:i}=e.data;document.cookie=`loginToken=${l};expires=${new Date(i)};`,this.$router.push("/admin/products"),this.loadings.pageLoading=!1,this.triggerToast("success","登入成功")}).catch(e=>{this.loadings.pageLoading=!1,this.triggerToast("error",e.response.data.message)})},...g(k,["triggerToast"])},computed:{...f(w,["loadings"])}},S={class:"container"},T={class:"mt-4"},y={class:"col-md-6"},P=s("h1",{class:"h3 mb-3 font-weight-normal"},"請先登入",-1),A={class:"mb-2"},I=s("label",{for:"email",class:"sr-only"},"Email address",-1),L={class:"mb-2"},B=s("label",{for:"password",class:"sr-only"},"Password",-1),D=s("div",{class:"text-end mt-4"},[s("button",{class:"btn btn-lg btn-primary btn-block",type:"submit"}," 登入 ")],-1);function $(r,e,l,i,a,u){const d=n("V-field"),c=n("ErrorMessage"),_=n("V-form");return v(),V("div",S,[s("div",T,[o(_,{class:"row justify-content-center",onSubmit:u.login},{default:b(({errors:m})=>[s("div",y,[P,s("div",A,[I,o(d,{type:"email",id:"email",name:"email",placeholder:"Email address",modelValue:a.user.username,"onUpdate:modelValue":e[0]||(e[0]=t=>a.user.username=t),autofocus:"",class:p(["form-control",{"is-invalid":m.email}]),rules:"required|email"},null,8,["modelValue","class"]),o(c,{name:"email",class:"invalid-feedback"})]),s("div",L,[B,o(d,{type:"password",id:"password",name:"password",class:p(["form-control",["form-control",{"is-invalid":m.password}]]),modelValue:a.user.password,"onUpdate:modelValue":e[1]||(e[1]=t=>a.user.password=t),placeholder:"Password",rules:"required"},null,8,["modelValue","class"]),o(c,{name:"password",class:"invalid-feedback"})]),D])]),_:1},8,["onSubmit"])])])}const R=h(x,[["render",$]]);export{R as default};
